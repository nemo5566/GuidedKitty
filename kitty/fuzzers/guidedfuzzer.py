#TODO: maybe implement the perform_dry_run(use_argv); in _test_environment